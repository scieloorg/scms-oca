{% load humanize %}
{% load static %}
{% load i18n %}
{% load wagtailsettings_tags %}
{% load wagtailcore_tags %}


<div class="card mb-3 result-item">
    <div class="card-body">
        <h5 class="card-title">
        {% for location in doc.source.locations %}
            {% if forloop.first %}
                <a href="{{ location.landing_page_url }}" target="_blank" class="text-decoration-none">
                    {{ doc.source.title }}
                </a>
            {% else %}
                <span class="text-muted">|</span>
                <a href="{{ location.landing_page_url }}" target="_blank" class="text-decoration-none">
                    {{ doc.source.title }}
                </a>
            {% endif %}
        {% endfor %}
        </h5>
        {% if doc.source.authorships %}
            <p class="card-text">
                {% for auth in doc.source.authorships %}
                    {{ auth.author.display_name }}{% if auth.author.orcid %} <a href="{{ auth.author.orcid }}" target="_blank"><img src="{% static 'images/authorIcon-orcid.png' %}" alt="ORCID"></a>{% endif %}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </p>
        {% endif %}
        {% if doc.source.journal_metadata.issns %}
        <p class="card-text">
            <small class="text-muted">
                {{ doc.source.journal_metadata.issns }}
            </small>
        </p>
        {% endif %}
        {% if doc.source.journal_metadata.journal %}
        <p class="card-text">
            <small class="text-muted">
                {{ doc.source.journal_metadata.journal }}
            </small>
        </p>
        {% endif %}
        <p class="card-text">
            <small class="text-muted">
                {% if doc.source.publication_year %}
                    <strong>Publicação:</strong> {{ doc.source.publication_year }}
                {% endif %}
                {% if doc.source.type %}
                    <strong>Tipo de documento:</strong> {{ doc.source.type }}
                {% endif %}
            </small>
        </p>
        {% if doc.source.biblio.volume or doc.source.biblio.issue or doc.source.biblio.first_page %}
        <p class="card-text">
            <small class="text-muted">
                {% if doc.source.biblio.volume %}v.{{ doc.source.biblio.volume }},{% endif %}{% if doc.source.biblio.issue %}n.{{ doc.source.biblio.issue }}, {% endif %}{% if doc.source.biblio.first_page %}p.{{ doc.source.biblio.first_page }}{% endif %}
            </small>
        </p>
        {% endif %}
        {% if doc.source.primary_location.source.display_name %}
        <p class="card-text">
            <strong>Fonte:</strong> {{ doc.source.primary_location.source.display_name }}
            {% if doc.source.journal_metadata.country %}
                <span class="badge bg-light text-dark">{{ doc.source.journal_metadata.country }}</span>
            {% endif %}
        </p>
        {% endif %}
        {% if doc.source.primary_location.doi %}
        <p class="card-text mb-0">
            <small class="text-muted">
                <a href="https://doi.org/{{ doc.source.primary_location.doi }}" target="_blank">
                    {{ doc.source.primary_location.doi }}
                </a>
            </small>
        </p>
        {% endif %}
        {% if doc.id %}
        <p class="card-text mb-0">
            <small class="text-muted">
                <a href="{{ doc.id }}" target="_blank">
                    {{ doc.id }}
                </a>
            </small>
        </p>
        {% endif %}
    </div>
</div>
