{% load custom_filters %}

<h4 class="my-2">Filters</h4>

<div id="filters-container">
    {% for category_key, category_info in filter_categories.items %}
        {% with category_filters=grouped_filters|get_item:category_key %}
            {% if category_filters %}
                <div class="h6 pb-2 mt-4 border-bottom text-primary">
                    <strong>{{ category_info.label }}</strong>
                </div>
                {% for key, options in category_filters %}
                    {% with metadata=filter_metadata|get_item:key %}
                    <div class="form-group mb-3">
                        <label class="form-label" for="{{ key }}">
                            {{ metadata.label|default:key }}
                        </label>
                        {% if metadata.class_filter == 'range' %}
                            {% include "search/include/filters/range.html" with key=key %}
                        {% else %}
                            {% include "search/include/filters/select2.html" %}
                        {% endif %}
                    </div>
                    {% endwith %}
                {% endfor %}
            {% endif %}
        {% endwith %}
    {% endfor %}
</div>

<div id="filter-status" class="mt-3 text-muted small text-center">
    <!-- Status de loading -->
</div>