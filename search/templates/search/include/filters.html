{% load custom_filters %}
{% load i18n %}

<div class="search-header-card search-header-card--sidebar">
    <span class="search-header-card__title search-header-card__title--sidebar">{% trans "Filters" %}</span>
</div>

<div id="filters-container">
    {% for category_key, category_info in filter_categories.items %}
        {% with category_filters=grouped_filters|get_item:category_key %}
            {% if category_filters %}
                <div class="filter-group-card filter-group-card--muted filter-group-card--collapsible">
                    <div class="filter-group-card__title">{{ category_info.label }}</div>
                    {% for key, options in category_filters %}
                        {% with metadata=filter_metadata|get_item:key %}
                        <div class="form-group {% if forloop.last %}mb-0{% else %}mb-3{% endif %}">
                            <label class="form-label" for="{{ key }}">
                                {{ metadata.label|default:key }}
                            </label>
                            {% if metadata.class_filter == 'range' %}
                                {% include "search/include/filters/range.html" with key=key %}
                            {% else %}
                                {% include "search/include/filters/select2.html" %}
                            {% endif %}
                        </div>
                        {% endwith %}
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
    {% endfor %}
</div>

<div id="filter-status" class="mt-3 text-muted small text-center">
</div>
